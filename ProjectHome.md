<br>
This project try to implement a web failsafe mode in wr703n bootloader(u-boot).<br>
Most of the web failsafe code port from the <a href='https://dev.openwrt.org/browser/trunk/package/uboot-lantiq'>https://dev.openwrt.org/browser/trunk/package/uboot-lantiq</a> package.<br>
I love the openwrt because it's use the bleeding edge package,so my project also should base on the latest u-boot source code,but it's need more time to do more work and test,so now i do it base on the u-boot in tp-link gpl release.some code maybe ugly,and not clean!But hope it's can work and useful for you.<br>
If you want to compile the u-boot with web failsafe for wr703n from source code,just try below step(assume your compile host use x86/linux system):<br>
1.check out the source code<br>
<pre><code>svn checkout http://wr703n-uboot-with-web-failsafe.googlecode.com/svn/trunk/ wr703n-uboot-with-web-failsafe-read-only<br>
</code></pre>
2.change to "wr703n-uboot-with-web-failsafe-read-only" directory:<br>
<pre><code>cd wr703n-uboot-with-web-failsafe-read-only<br>
</code></pre>
3.type "make"<br>
<pre><code>make<br>
</code></pre>
you will get the "tuboot.bin" in "wr703n-uboot-with-web-failsafe-read-only/u-boot" directory.<br>
4.install you compiled u-boot from openwrt linux prompt,you can reference my install script(maybe you need some change base on it):<br>
<pre><code>#! /bin/sh<br>
<br>
<br>
#high chance need have a change ...<br>
UBOOT_NAME=wr703n_tuboot_test_2012_06_06.bin<br>
MD5SUM_SHOULD_BE="623dc0bba6fab68c22e5fb2f329d7d09"<br>
UBOOT_IMAGE_URL=192.168.1.2<br>
<br>
<br>
<br>
wget http://$UBOOT_IMAGE_URL/$UBOOT_NAME<br>
<br>
#need check the md5sum,any one byte in bootloader shoud right ...<br>
CURRENT_MD5SUM_VAL=$( md5sum $UBOOT_NAME |awk '{print $1 }' )<br>
echo "$UBOOT_NAME md5sum : $CURRENT_MD5SUM_VAL"<br>
<br>
if [ $MD5SUM_SHOULD_BE = $CURRENT_MD5SUM_VAL ]; then<br>
	echo "$UBOOT_NAME md5sum check pass"<br>
else<br>
	echo "###############$UBOOT_NAME md5sum check fail###############"<br>
	exit<br>
fi<br>
<br>
RAW_UBOOT_LEN=`wc -c $UBOOT_NAME | awk '{print $1 }'`<br>
NEED_PAD_LEN=$((0x1fc00-$RAW_UBOOT_LEN))<br>
<br>
#Generate a file used as pad ...<br>
dd if=/dev/zero of=pad.bin bs=1 count=$NEED_PAD_LEN<br>
<br>
cat $UBOOT_NAME pad.bin &gt;tuboot_0x1fc00.bin<br>
<br>
echo "Backup some config first,just like MAC address ..."<br>
dd if=/dev/mtd0 of=./config.bin bs=1 skip=$((0x1fc00))<br>
<br>
cat ./tuboot_0x1fc00.bin ./config.bin &gt;uboot_0x20000.bin<br>
<br>
cat uboot_0x20000.bin &gt;/dev/mtdblock0<br>
<br>
sync<br>
<br>
<br>
</code></pre>
I use the  cross-toolchain generated by the openwrt buildroot.<br>

When you push the button on wr703n and power on(before this you need connect the ethernet cable between PC and wr703n),you first will see the LED on one second and then off,and you need push the button until the LED on again,now you can release the button,set your PC to 192.168.1.2,and web view 192.168.1.1,you will see the failsafe page.<br>

More info,please read:<a href='https://forum.openwrt.org/viewtopic.php?id=35823'>https://forum.openwrt.org/viewtopic.php?id=35823</a>  [20130405:this link has dead ...]<br>
<br>
Also recommend you try this project,a cool guys do many changes that's what we need:<br>
<a href='https://forum.openwrt.org/viewtopic.php?id=43237'>https://forum.openwrt.org/viewtopic.php?id=43237</a>

TODO ...